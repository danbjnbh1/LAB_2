# 📝 סיכום מעבדה 2 - קצר ולעניין

---

## ✅ Task 0a - Shell בסיסי

**מה עשינו:** תוכנית שמקבלת פקודות מהמשתמש ומריצה אותן.

**המהות:** 
- לופ אינסופי שקורא פקודות
- `execv()` מריץ את הפקודה
- **הבעיה:** Shell נסגר אחרי כל פקודה (כי execv מחליף את התהליך)

---

## ✅ Task 0b - Looper (Signal Handler)

**מה עשינו:** תוכנית שמגיבה ל-signals (Ctrl+C, Ctrl+Z וכו')

**המהות:**
- מתקינים handlers ל-signals שונים
- מדפיס איזה signal קיבל
- מעביר ל-default handler כדי שהפעולה תקרה

**למה:** כדי לבדוק את פקודות ה-signal management בהמשך.

---

## ✅ Task 1a - fork() + execvp + debug

**מה עשינו:** Shell שנשאר חי!

**המהות:**
- `fork()` יוצר תהליך בן לפני ההרצה
- תהליך הבן מריץ את הפקודה (`execvp`)
- תהליך האב (Shell) נשאר חי ומחכה
- `execvp` במקום `execv` - מחפש בתיקיות PATH

**תוצאה:** יכול לכתוב `ls` במקום `/bin/ls`!

---

## ✅ Task 1b - cd command

**מה עשינו:** פקודת `cd` לשינוי תיקיות.

**המהות:**
- `chdir()` משנה את התיקייה הנוכחית
- **חייב לרוץ בשל עצמו** (לא דרך fork!) כי צריך לשנות את Shell עצמו

---

## ✅ Task 1c - waitpid + Background (&)

**מה עשינו:** תמיכה בפקודות רקע.

**המהות:**
- `waitpid()` - Shell מחכה לפקודות רגילות
- עם `&` בסוף - Shell **לא מחכה** (background)
- `blocking` field במבנה cmdLine קובע את ההתנהגות

**דוגמה:** `sleep 5` = מחכה, `sleep 5 &` = לא מחכה

---

## ✅ Task 2 - I/O Redirection

**מה עשינו:** הפניית קלט/פלט לקבצים.

**המהות:**
- `open()` פותח קובץ
- `dup2()` מחליף file descriptor (stdin/stdout → קובץ)
- `<` קורא מקובץ במקום מקלדת
- `>` כותב לקובץ במקום מסך

**דוגמה:** `echo hello > file.txt` יוצר קובץ עם "hello"

---

## ✅ Task 3 - Signals (blast/zzzz/kuku)

**מה עשינו:** 3 פקודות לשליטה בתהליכים.

**המהות:**
- `kill(pid, signal)` שולח signal לתהליך אחר
- **blast** = SIGINT (הרוג)
- **zzzz** = SIGTSTP (עצור/השהה)
- **kuku** = SIGCONT (המשך)

**דוגמה:** `zzzz 123` עוצר את תהליך 123

---

## ✅ Task 4 - mypipe

**מה עשינו:** תוכנית שמדגימה pipe (צינור).

**המהות:**
- `pipe()` יוצר צינור וירטואלי
- `fork()` יוצר 2 תהליכים
- Child כותב לצינור → Parent קורא מהצינור
- **זה הבסיס** לכל `|` בשלים (ls | grep)

**דוגמה:** `./mypipe "Hello"` → Child שולח "Hello" → Parent מדפיס "Hello"

---

# 🎯 הרעיון המרכזי של המעבדה:

**איך Shell עובד מאחורי הקלעים:**
1. קורא פקודה מהמשתמש
2. יוצר תהליך חדש (fork)
3. מריץ את הפקודה בתהליך זה (exec)
4. מחכה לסיום או ממשיך (wait)
5. מטפל בקלט/פלט (redirection)
6. שולט בתהליכים (signals)
7. מתקשר בין תהליכים (pipes)

**בסוף יש לך shell עובד שמבין פקודות כמו bash!** 🎉